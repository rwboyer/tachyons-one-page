{{ define "main" }}

<section id="holder" class="relative">
  <div id="maximage" class="flex relative w-50 overflow-hidden items-center justify-center vh-100 center">
    {{ range .Params.slides }}
    <img src="{{.}}" class="bg-top">
    {{ end }}
  </div>
</section>

<script type="text/javascript" charset="utf-8">
  $(function () {
    $('#maximage').maximage({
      backgroundSize: 'bg-top',
      fillElement: '#holder'
    });
  });
</script>

<section class="relative mw9 ph4 ph5-ns pv4-ns mb5 center">
  {{ if isset .Params "sideline" }}
    {{ partial "sideline" (dict "sideline" .Params.sideline (cond (isset .Params "sidecolor") "sidecolor" "") .Params.sidecolor) }}
  {{ end }}
  <div class="flex flex-wrap-reverse justify-between">
  <article class="mv0 w-100 w-70-ns">
    <header class="lh-title">
      <div class="vh-100 w-100"></div>
      <h1 class="mt2 mb2 f1 fw3">{{ .Title | plainify }}</h1>
      <h2 class="mt0 mb4 f3 fw1">{{ .Params.subtitle | safeHTML }}</h2>
    </header>
    <div class="content mb5">
      {{ .Content }}
    </div>
  </article>
  <aside class="w-100 w-30-ns mb4 mb0-ns lh-solid tr">
    <time class="f-subheadline fw3 tr"><span class="f2">{{ dateFormat "2006" .Date }}</span><br>{{ dateFormat "01" .Date }}<span class="fw7">{{ dateFormat "02" .Date }}</span></time>
    {{ with .Params.studio }}
    {{ partial "slab-stat-studio" . }}
    {{ end }}
  </aside>
  </div>
</section>
<section class="dn fixed top-0 left-0 bottom-0 right-0">
  <div class="galleria">
    {{ range .Params.slides }}
    <img src="{{.}}">
    {{ end }}
  </div>  
<script>
  (function () {
    Galleria.loadTheme('/js/galleria/themes/classic/galleria.classic.min.js');
    Galleria.run('.galleria');
  }());
</script>
</section>

{{ end }}
